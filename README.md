ğŸ“Œ Overview

What is CHARMTwinsight?
CHARMTwinsight is a medical digital twin framework within Project CHARM, designed to simulate patient trajectories using real and synthetic healthcare data.

The repository is built to:
âœ… Ingest real FHIR data from HAPI-FHIR.
âœ… Process synthetic patient data generated by Synthea.
âœ… Support future predictive analytics for clinical decision-making.

This milestone focuses on the ingestion pipeline and does not yet finalize the storage layer.

ğŸ“Œ What is FHIR?

FHIR (Fast Healthcare Interoperability Resources) is a standard developed by HL7 for healthcare data exchange in modern digital systems. It defines a common data model and API for interoperability between electronic health record (EHR) systems.

ğŸ“– Learn More: HL7 FHIR Official Documentation (https://www.hl7.org/fhir/)

ğŸ“Œ What is HAPI-FHIR?

HAPI-FHIR is an open-source FHIR server that allows storing, querying, and managing FHIR-compliant patient data.

ğŸ“– Learn More: HAPI-FHIR GitHub (https://github.com/hapifhir/hapi-fhir)

ğŸ–¥ This repository uses HAPI-FHIR to:
âœ… Store both real and synthetic patient data.
âœ… Serve FHIR-compliant patient records via API requests.
âœ… Provide a backend repository for digital twin analytics.

ğŸ“Œ What is Synthea?

Synthea (Synthetic Patient Generator) is an open-source tool that creates realistic, FHIR-compliant synthetic patient records for research and testing.

ğŸ“– Learn More: Synthea GitHub (https://github.com/synthetichealth/synthea)

ğŸ–¥ This repository uses Synthea to:
âœ… Generate US Core-compliant synthetic patient records.
âœ… Simulate population health data for research.
âœ… Test CHARMTwinsight ingestion workflows.

ğŸ“Œ Repository Architecture

ğŸ“ Goal: Establish a minimal data repository that can:

Ingest data from HAPI-FHIR (FHIR-HOSE).
Support synthetic data generation via Synthea.
Store basic demographics & lab values for future analytics.
Remain flexible for additional data types (e.g., time-series).
ğŸ“ Key Components:
1ï¸âƒ£ HAPI-FHIR Server: Stores real & synthetic patient data.
2ï¸âƒ£ Synthea Generator: Creates synthetic patient data.
3ï¸âƒ£ Python Upload Script: Pushes FHIR JSON files to HAPI-FHIR.
4ï¸âƒ£ Data Ingestion Pipeline: API to receive patient data for analytics.

ğŸ“Œ Current Limitation: The final storage choice (SQL/NoSQL/cloud) is still under evaluation.

ğŸ“Œ How to Set Up & Run the Project

ğŸš€ Prerequisites
ğŸ“Œ You need to install:
âœ… Java (for running Synthea).
âœ… Docker (for running HAPI-FHIR).
âœ… Python 3 (for executing the upload script).

1ï¸âƒ£ Start a Local HAPI-FHIR Server
ğŸ“ Option 1: Run HAPI-FHIR with Docker

docker pull hapiproject/hapi:latest
docker run -p 8080:8080 hapiproject/hapi:latest

After starting the server, visit:

FHIR API: http://localhost:8080/fhir

2ï¸âƒ£ Generate Synthetic Patients with Synthea
ğŸ“ Download the Synthea JAR file:
ğŸ“– Synthea GitHub Releases
OR
Add the .jar file to this repo under synthea/.

ğŸ“ Run Synthea to generate synthetic patients:

java -jar synthea-with-dependencies.jar -p 20 -a 1-90 -s 123 --exporter.fhir.use_us_core_ig true
ğŸ”¹ This generates 20 synthetic patients, aged 1-90, in FHIR US Core format.
ğŸ”¹ JSON files will be in: /output/fhir/patients/.

3ï¸âƒ£ Upload Data to HAPI-FHIR
ğŸ“ Run the Python script to upload patients:

python upload_patients.py
ğŸ–¥ What This Script Does:
âœ… Reads patient JSON files from /output/fhir/patients/.
âœ… Uploads them to HAPI-FHIR (http://localhost:8080/fhir).
âœ… Prints success/error messages for debugging.

ğŸ“Œ Code Structure

/synthea/                     # (Optional) Synthea JAR file  
/output/fhir/patients/        # FHIR patient JSON files  
/upload_patients.py           # Python script to upload patients  
/README.md                    # Documentation  
ğŸ“Œ Example API Calls

âœ… Check if Patients Were Uploaded

curl -X GET "http://localhost:8080/fhir/Patient?_count=5" -H "Accept: application/json"
âœ… Check the FHIR Server Capability Statement

curl -X GET "http://localhost:8080/fhir/metadata" -H "Accept: application/json"

ğŸ“Œ Next Steps & Extensions

ğŸ”¹ Upcoming Features:
âœ… Automate bulk uploads (batch processing).
âœ… Support real patient ingestion from external FHIR-HOSE pipelines.
âœ… Enhance storage layer for analytics & machine learning.

ğŸ“Œ Conclusion

ğŸ”¥ This repository is the foundation of CHARMTwinsightâ€™s data ingestion pipeline.
âœ… It enables synthetic & real patient data ingestion.
âœ… Uses HAPI-FHIR as a backend repository.
âœ… Supports future predictive analytics and digital twin modeling.